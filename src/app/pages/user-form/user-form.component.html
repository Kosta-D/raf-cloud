<div class="user-form">
  <h2>{{ isEditMode ? 'Azuriraj korisnika' : 'Dodaj novog korisnika' }}</h2>

  <!-- Backend / validation error -->
  <div *ngIf="errorMessage" class="error">
    {{ errorMessage }}
  </div>

  <form (ngSubmit)="saveUser()">
    <label>Ime:</label>
    <input type="text" [(ngModel)]="user.firstName" name="firstName" required />

    <label>Prezime:</label>
    <input type="text" [(ngModel)]="user.lastName" name="lastName" required />

    <label>Imejl:</label>
    <input type="email" [(ngModel)]="user.email" name="email" required />

    <label>Lozinka:</label>
    <input
      type="password"
      [(ngModel)]="user.password"
      name="password"
      [required]="!isEditMode"
      [placeholder]="isEditMode ? 'Ostavi prazno ako ne menjas lozinku' : ''"
    />

    <label>Дозволе:</label>
    <div class="permissions">
      <label *ngFor="let perm of allPermissions">
        <input
          type="checkbox"
          [checked]="user.permissions.includes(perm)"
          (change)="togglePermission(perm)"
        />
        {{ perm }}
      </label>
    </div>

    <div class="buttons">
      <button type="submit" class="save-btn">
        {{ isEditMode ? 'Sacuvaj izmene' : 'Dodaj korisnika' }}
      </button>
      <button type="button" class="cancel-btn" (click)="cancel()">Откажи</button>
    </div>
  </form>
</div>
